<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Create Customer | Paysecure</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/@stoplight/elements/web-components.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/@stoplight/elements/styles.min.css" />
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #1F1438;
      --card-bg: #f9f9fb;
      --border-radius: 16px;
      --shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }

    html,
    body {
      height: 100%;
      font-family: 'DM Sans', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      scroll-behavior: smooth;
    }

    .api-container {
      margin: auto;
      padding: 1rem;
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Scrollbar */
    body::-webkit-scrollbar {
      width: 10px;
    }

    body::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
    }

    body::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 5px;
    }
  </style>
</head>

<body>
  <div class="api-container">
    <elements-api id="sl-api"></elements-api>
  </div>

  <script>
    window.addEventListener('load', () => {
      // Get query param or set default
      const urlParams = new URLSearchParams(window.location.search);
      const apiUrl = window.location.hash.substring(1);

      const apiComponent = document.getElementById('sl-api');

      if (apiComponent) {
        apiComponent.apiDescriptionUrl = apiUrl;
        apiComponent.router = 'hash';
        apiComponent.layout = 'stacked';
        apiComponent.tryIt = true;
        apiComponent.showConsole = true;
        apiComponent.hideInternal = true;
        apiComponent.hideExport = true;
        apiComponent.hideSchemas = true;
        apiComponent.hideModels = true;
        apiComponent.hideSidebar = true;
        apiComponent.route = 'createCustomer';
      }
    });

    document.addEventListener('DOMContentLoaded', function(){
      setTimeout(() => {
      const clickable = document.querySelector(".sl-flex.sl-justify-between.sl-items-center.sl-mx-auto.sl-px-2.sl-py-4.sl-text-current")
      console.log(clickable)

      if (clickable) {
        clickable.click();
        console.log('Clickable element found and clicked');
      }
      else {
        console.log('Clickable element not found');
      }
      }, 200);
    });
    document.addEventListener('DOMContentLoaded', function(){
      setTimeout(() => {
      const clickable = document.querySelector(".sl-flex.sl-items-center.sl-text-lg.sl-mx-auto.sl-p-2.sl-text-current.sl-cursor-pointer")
      console.log(clickable)

      if (clickable) {
        clickable.click();
        console.log('Clickable element found and clicked');
      }
      else {
        console.log('Clickable element not found');
      }
      }, 200);
    });
    // Auto Height Script
    const container = document.querySelector('.api-container');

    function postHeight() {
      if (!container) return;
      const height = container.scrollHeight;
      parent.postMessage({ type: 'stoplightHeight', height }, '*');
    }

    if (container) {
      const resizeObserver = new ResizeObserver(postHeight);
      resizeObserver.observe(container);
    }

    const mutationObserver = new MutationObserver(postHeight);
    mutationObserver.observe(container, {
      childList: true,
      subtree: true,
      attributes: true,
      characterData: true
    });

    setInterval(postHeight, 300);
    window.addEventListener('load', postHeight);
    window.addEventListener('resize', postHeight);

    // Font + Style injection
    function injectStylesIntoElements() {
      const apiComponent = document.getElementById('sl-api');
      if (!apiComponent) return;

      const tryInject = () => {
        const wrapper = apiComponent.querySelector('[data-testid="http-service"]') || apiComponent.querySelector('div');
        if (wrapper && wrapper.shadowRoot == null) {
          const style = document.createElement('style');
          style.textContent = `
            * {
              font-family: 'DM Sans', sans-serif !important;
            }

            .sl-flex.sl-justify-end.sl-items-center.sl-px-1.sl-py-3 {
              display: none;
            }
          `;
          wrapper.appendChild(style);
        } else {
          setTimeout(tryInject, 100);
        }
      };

      setTimeout(tryInject, 10);
    }
    window.addEventListener('load', injectStylesIntoElements);
  </script>
</body>

</html>